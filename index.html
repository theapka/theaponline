<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>គេហទំព័រអាពាហ៍ពិពាហ៍ - ធៀប អនឡាញ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* Custom styles */
        body {
            font-family: 'Kantumruy Pro', sans-serif;
            scroll-behavior: smooth;
            /* Add padding to the bottom to avoid content being hidden by the mobile nav */
            padding-bottom: 70px; /* Adjust if nav height changes */
        }
        @media (min-width: 768px) { /* md breakpoint */
            body {
                padding-bottom: 0;
            }
        }
        /* Style for smooth transitions */
        .page {
            display: none;
            animation: fadeIn 0.5s;
        }
        .page.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .animate-float {
            animation: float 4s ease-in-out infinite;
        }
        /* Add smooth transition for dark mode */
        body, header, main, footer, .modal-content {
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        }
        .animated-gradient-text {
            background-image: linear-gradient(
                -225deg,
                #f9a8d4 0%,
                #ec4899 29%,
                #c026d3 67%,
                #9333ea 100%
            );
            background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }

        .animated-gradient-text.typing::after {
            content: "​"; /* Zero-width space */
            display: inline-block;
            width: 4px;
            height: 0.9em;
            background: #ec4899;
            animation: blink 0.8s infinite;
            vertical-align: baseline;
            margin-left: 8px;
        }

        .dark .animated-gradient-text.typing::after {
            background: #f9a8d4;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }
        /* Spinner styles */
        .spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        /* Active state for mobile nav */
        .mobile-nav-item.active {
            color: #ec4899; /* pink-500 */
        }
        
        /* Animated Logo */
        @keyframes rotate-ring1 {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-2px, 2px) rotate(-10deg); }
        }
        @keyframes rotate-ring2 {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(2px, -2px) rotate(10deg); }
        }
        #animated-logo .ring1 {
            transform-origin: 35px 50px;
            animation: rotate-ring1 5s ease-in-out infinite;
        }
        #animated-logo .ring2 {
            transform-origin: 65px 50px;
            animation: rotate-ring2 5s ease-in-out infinite;
        }

        /* Animated Gallery Logo */
        @keyframes pulse-glow {
            0%, 100% {
                filter: drop-shadow(0 0 2px #f472b6);
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 8px #f472b6);
                transform: scale(1.05);
            }
        }
        #gallery-logo {
            animation: pulse-glow 3s ease-in-out infinite;
        }

        /* Removed Phone Mockup Styles */

    </style>
    <script>
        // Tailwind CSS configuration for dark mode
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200">

    <header class="bg-white dark:bg-gray-800/80 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center gap-2 text-2xl font-bold text-pink-500" data-page="home">
                <svg id="animated-logo" class="w-8 h-8" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="35" cy="50" r="15" stroke-width="8" stroke="#f472b6" fill="none" class="ring1"/>
                    <circle cx="65" cy="50" r="15" stroke-width="8" stroke="#c084fc" fill="none" class="ring2"/>
                </svg>
                <span data-lang-key="nav_brand">ធៀប អនឡាញ</span>
            </a>
            
            <!-- Desktop Navigation -->
            <nav class="hidden md:flex items-center space-x-6">
                <a href="#" class="flex items-center text-gray-600 dark:text-gray-300 hover:text-pink-500" data-page="home" data-lang-key="nav_home">
                    <i class="fas fa-home mr-2 opacity-75"></i>
                    <span>ទំព័រដើម</span>
                </a>
                <a href="#" class="flex items-center text-gray-600 dark:text-gray-300 hover:text-pink-500" data-page="features" data-lang-key="nav_features">
                    <i class="fas fa-star mr-2 opacity-75"></i>
                    <span>មុខងារ</span>
                </a>
                <a href="#" class="flex items-center text-gray-600 dark:text-gray-300 hover:text-pink-500" data-page="gallery" data-lang-key="nav_templates">
                    <i class="fas fa-images mr-2 opacity-75"></i>
                    <span>គំរូធៀប</span>
                </a>
                <a href="#" class="flex items-center text-gray-600 dark:text-gray-300 hover:text-pink-500" data-page="contact" data-lang-key="nav_contact">
                    <i class="fas fa-envelope mr-2 opacity-75"></i>
                    <span>ទាក់ទងយើង</span>
                </a>
            </nav>

            <div class="flex items-center space-x-4">
                <!-- Auth Container for both mobile and desktop -->
                <div id="auth-container">
                    <!-- Logged Out State -->
                    <div id="auth-buttons">
                         <button class="bg-pink-500 text-white px-4 py-2 rounded-full hover:bg-pink-600 font-semibold" data-page="login" data-lang-key="login_title">ចូលគណនី</button>
                    </div>
                     <!-- Logged In State -->
                    <div id="user-profile-container" class="relative hidden">
                        <button id="profile-button" class="focus:outline-none transition transform hover:scale-110">
                            <img id="profile-avatar" src="https://placehold.co/32x32/f472b6/ffffff?text=U" alt="User Avatar" class="w-8 h-8 rounded-full object-cover ring-2 ring-pink-200 dark:ring-pink-700">
                        </button>
                        <div id="profile-dropdown" class="absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 hidden">
                            <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-600">
                                <p class="text-sm font-semibold text-gray-900 dark:text-white" id="profile-name">User Name</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400 truncate" id="profile-email">user@example.com</p>
                            </div>
                            <a href="my-cards.html" class="w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                                <i class="fas fa-layer-group fa-fw mr-2 text-gray-400"></i>
                                <span data-lang-key="my_cards_link">ធៀបរបស់ខ្ញុំ</span>
                            </a>
                             <a href="theapka.html" class="w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                                <i class="fas fa-edit fa-fw mr-2 text-gray-400"></i>
                                <span data-lang-key="edit_card_link">កែសម្រួលធៀប</span>
                            </a>
                            <div class="border-t border-gray-200 dark:border-gray-600 my-1"></div>
                            <!-- Settings moved inside dropdown -->
                            <button id="theme-toggle" class="w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                                <i class="fas fa-sun fa-fw mr-2 text-gray-400" id="sun-icon"></i>
                                <i class="fas fa-moon fa-fw mr-2 text-gray-400 hidden" id="moon-icon"></i>
                                <span data-lang-key="theme_toggle_text">ប្តូរការបង្ហាញ</span>
                            </button>
                            <button id="lang-toggle" class="w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                                <i class="fas fa-globe fa-fw mr-2 text-gray-400"></i>
                                <span id="lang-text">ប្តូរទៅ EN</span>
                            </button>
                            <div class="border-t border-gray-200 dark:border-gray-600 my-1"></div>
                            <button id="logout-btn" class="w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">
                                <i class="fas fa-sign-out-alt fa-fw mr-2 text-gray-400"></i>
                                <span data-lang-key="logout_btn">ចាកចេញ</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-16">
        
        <section id="home" class="page active">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="text-center md:text-left">
                    <span class="text-pink-500 font-semibold" data-lang-key="hero_tagline">ធៀប អនឡាញ - អ្នកបង្កើតធៀបការ</span>
                    <h1 class="text-3xl md:text-4xl font-bold my-4 animated-gradient-text" data-lang-key="hero_title"></h1>
                    <p class="mb-6 text-gray-600 dark:text-gray-400" data-lang-key="hero_subtitle">បង្កើតនិងរៀបចំធៀបការឌីជីថល គ្រប់គ្រងបញ្ជីភ្ញៀវ និងចែករំលែករឿងរ៉ាវស្នេហារបស់អ្នកបានយ៉ាងងាយស្រួល។</p>
                    <button id="hero-cta-btn" class="bg-pink-500 text-white px-8 py-3 rounded-full font-semibold hover:bg-pink-600 transform hover:scale-105 transition duration-300" data-page="register" data-lang-key="hero_cta">ចាប់ផ្តើមឥឡូវនេះ</button>
                    <a href="theapka.html" id="create-card-now-btn" class="hidden bg-pink-500 text-white px-8 py-3 rounded-full font-semibold hover:bg-pink-600 transform hover:scale-105 transition duration-300" data-lang-key="create_card_now_btn">បង្កើតធៀបឥឡូវនេះ</a>

                    <div class="mt-10 flex justify-center md:justify-start space-x-8 text-center">
                        <div>
                            <p class="text-2xl font-bold dark:text-white" data-lang-key="stat_1_val">២០០០+</p>
                            <p class="text-sm text-gray-500 dark:text-gray-400" data-lang-key="stat_1_label">គូស្វាមីភរិយា</p>
                        </div>
                        <div>
                            <p class="text-2xl font-bold dark:text-white" data-lang-key="stat_2_val">២៤/៧</p>
                            <p class="text-sm text-gray-500 dark:text-gray-400" data-lang-key="stat_2_label">ការគាំទ្រ</p>
                        </div>
                        <div>
                            <p class="text-2xl font-bold dark:text-white" data-lang-key="stat_3_val">៩៩%</p>
                            <p class="text-sm text-gray-500 dark:text-gray-400" data-lang-key="stat_3_label">ការពេញចិត្ត</p>
                        </div>
                    </div>
                </div>
                
                <!-- Image Block -->
                <div class="relative pt-12 md:pt-0">
                    <!-- Background blur circles -->
                    <div class="absolute w-72 h-72 bg-pink-200 dark:bg-pink-800/50 rounded-full -top-10 -right-4 blur-2xl opacity-60"></div>
                    <div class="absolute w-72 h-72 bg-purple-200 dark:bg-purple-800/50 rounded-full -bottom-10 -left-4 blur-2xl opacity-60"></div>
                    
                    <!-- Main Image -->
                    <img src="photo/T2.png" alt="Wedding Invitation Preview" class="relative z-10 rounded-3xl shadow-2xl mx-auto animate-float">
                </div>
                <!-- End Image Block -->

            </div>
        </section>

        <!-- Other sections like features, pricing etc. remain unchanged -->
        <section id="features" class="page">
           <h2 class="text-3xl font-bold text-center mb-10" data-lang-key="features_title">មុខងារពិសេសរបស់យើង</h2>
             <div class="grid md:grid-cols-3 gap-8">
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                     <i class="fas fa-magic text-pink-500 text-4xl mb-4"></i>
                     <h3 class="text-xl font-semibold mb-2" data-lang-key="feature_1_title">ជម្រើសគំរូច្រើន</h3>
                     <p class="text-gray-600 dark:text-gray-400" data-lang-key="feature_1_desc">បង្កើតកាតអញ្ជើញដ៏ស្រស់ស្អាត และអាចប្ដូរតាមបំណងបាន។</p>
                 </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                     <i class="fas fa-users text-pink-500 text-4xl mb-4"></i>
                     <h3 class="text-xl font-semibold mb-2" data-lang-key="feature_2_title">ការគ្រប់គ្រងភ្ញៀវ</h3>
                     <p class="text-gray-600 dark:text-gray-400" data-lang-key="feature_2_desc">តាមដានការឆ្លើយតបរបស់ភ្ញៀវ และគ្រប់គ្រងបញ្ជីឈ្មោះបានយ៉ាងងាយស្រួល។</p>
                 </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                     <i class="fas fa-camera-retro text-pink-500 text-4xl mb-4"></i>
                     <h3 class="text-xl font-semibold mb-2" data-lang-key="feature_3_title">វិចិត្រសាលរូបភាព</h3>
                     <p class="text-gray-600 dark:text-gray-400" data-lang-key="feature_3_desc">ចែករំលែករូបថត Pre-wedding และអនុស្សាវរីយ៍ផ្សេងៗជាមួយភ្ញៀវរបស់អ្នក។</p>
                 </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                     <i class="fas fa-ban text-pink-500 text-4xl mb-4"></i>
                     <h3 class="text-xl font-semibold mb-2" data-lang-key="feature_4_title">គ្មានការផ្សាយពាណិជ្ជកម្ម</h3>
                     <p class="text-gray-600 dark:text-gray-400" data-lang-key="feature_4_desc">ធានានូវបទពិសោធន៍ដ៏ល្អឥតខ្ចោះសម្រាប់ភ្ញៀវរបស់អ្នក។</p>
                 </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                     <i class="fas fa-clock text-pink-500 text-4xl mb-4"></i>
                     <h3 class="text-xl font-semibold mb-2" data-lang-key="feature_5_title">ការរាប់ថយក្រោយ</h3>
                     <p class="text-gray-600 dark:text-gray-400" data-lang-key="feature_5_desc">បង្ហាញម៉ោងរាប់ថយក្រោយរហូតដល់ថ្ងៃពិសេសរបស់អ្នក។</p>
                 </div>
                  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center">
                     <i class="fas fa-map-marked-alt text-pink-500 text-4xl mb-4"></i>
                     <h3 class="text-xl font-semibold mb-2" data-lang-key="feature_6_title">ផែនទី</h3>
                     <p class="text-gray-600 dark:text-gray-400" data-lang-key="feature_6_desc">ភ្ជាប់ទីតាំងពិធីរបស់អ្នកជាមួយ Google Maps សម្រាប់ភ្ញៀវ។</p>
                 </div>
             </div>
        </section>

        <section id="gallery" class="page">
            <div class="flex justify-center items-center gap-4 mb-10">
                <svg id="gallery-logo" class="w-10 h-10 text-pink-400" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14.5 4.5L14.5 3.5C14.5 2.39543 13.6046 1.5 12.5 1.5H3.5C2.39543 1.5 1.5 2.39543 1.5 3.5V12.5C1.5 13.6046 2.39543 14.5 3.5 14.5H4.5M14.5 4.5L19.5 9.5M14.5 4.5L9.5 9.5M4.5 19.5L7.5 16.5L9.5 18.5L14.5 13.5L19.5 18.5L22.5 15.5M19.5 4.5H21.5C22.0523 4.5 22.5 4.94772 22.5 5.5V20.5C22.5 21.6046 21.6046 22.5 20.5 22.5H6.5C5.39543 22.5 4.5 21.6046 4.5 20.5V19.5M4.5 19.5L1.5 22.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h2 class="text-3xl font-bold text-center" data-lang-key="templates_title">គំរូធៀបអញ្ជើញ</h2>
            </div>
             <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                 <img src="https://placehold.co/400x500/E91E63/FFFFFF?text=Template+1" alt="Wedding Template" class="rounded-lg shadow-md hover:opacity-80 cursor-pointer transition">
                 <img src="https://placehold.co/400x500/9C27B0/FFFFFF?text=Template+2" alt="Wedding Template" class="rounded-lg shadow-md hover:opacity-80 cursor-pointer transition">
                 <img src="https://placehold.co/400x500/673AB7/FFFFFF?text=Template+3" alt="Wedding Template" class="rounded-lg shadow-md hover:opacity-80 cursor-pointer transition">
                 <img src="https://placehold.co/400x500/3F51B5/FFFFFF?text=Template+4" alt="Wedding Template" class="rounded-lg shadow-md hover:opacity-80 cursor-pointer transition">
             </div>
        </section>
        <section id="contact" class="page">
              <div class="max-w-2xl mx-auto bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg">
                 <h2 class="text-3xl font-bold text-center mb-8" data-lang-key="contact_title">ទាក់ទងមកពួកយើង</h2>
                 <form>
                     <div class="mb-4">
                         <label for="name" class="block mb-2 font-medium" data-lang-key="form_name">ឈ្មោះ</label>
                         <input type="text" id="name" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                     </div>
                     <div class="mb-4">
                         <label for="email" class="block mb-2 font-medium" data-lang-key="form_email">អ៊ីមែល</label>
                         <input type="email" id="email" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                     </div>
                     <div class="mb-6">
                         <label for="message" class="block mb-2 font-medium" data-lang-key="form_message">សារ</label>
                         <textarea id="message" rows="5" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required></textarea>
                     </div>
                     <button type="submit" class="w-full bg-pink-500 text-white px-8 py-3 rounded-full font-semibold hover:bg-pink-600" data-lang-key="form_send">ផ្ញើសារ</button>
                 </form>
             </div>
        </section>

        <section id="login" class="page">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-center mb-8" data-lang-key="login_title">ចូលគណនី</h2>
                <form id="login-form">
                    <div id="login-error" class="text-red-500 text-sm mb-4 text-center hidden"></div>
                    <div class="mb-4">
                        <label for="login-email" class="block mb-2 font-medium" data-lang-key="form_email">អ៊ីមែល</label>
                        <input type="email" id="login-email" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="login-password" class="block mb-2 font-medium" data-lang-key="form_password">ពាក្យសម្ងាត់</label>
                        <input type="password" id="login-password" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                    </div>
                    <button type="submit" id="login-submit-btn" class="w-full bg-pink-500 text-white px-8 py-3 rounded-full font-semibold hover:bg-pink-600 flex items-center justify-center disabled:opacity-50">
                        <span class="btn-text" data-lang-key="login_btn">ចូលគណនី</span>
                        <i class="fas fa-spinner spinner ml-2 hidden"></i>
                    </button>
                    <p class="text-center mt-4 text-sm">
                        <span data-lang-key="login_no_account">មិនទាន់មានគណនី?</span>
                        <a href="#" class="text-pink-500 hover:underline" data-page="register" data-lang-key="register_link">បង្កើតគណនី</a>
                    </p>
                </form>
            </div>
        </section>

        <section id="register" class="page">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-center mb-8" data-lang-key="register_title">បង្កើតគណនីថ្មី</h2>
                <form id="register-form">
                    <div id="register-error" class="text-red-500 text-sm mb-4 text-center hidden"></div>
                    <div class="mb-4">
                        <label for="register-name" class="block mb-2 font-medium" data-lang-key="form_name">ឈ្មោះ</label>
                        <input type="text" id="register-name" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                    </div>
                    <div class="mb-4">
                        <label for="register-email" class="block mb-2 font-medium" data-lang-key="form_email">អ៊ីមែល</label>
                        <input type="email" id="register-email" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                    </div>
                    <div class="mb-4">
                        <label for="register-password" class="block mb-2 font-medium" data-lang-key="form_password">ពាក្យសម្ងាត់</label>
                        <input type="password" id="register-password" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                    </div>
                     <div class="mb-6">
                        <label for="register-confirm-password" class="block mb-2 font-medium" data-lang-key="form_confirm_password">បញ្ជាក់ពាក្យសម្ងាត់</label>
                        <input type="password" id="register-confirm-password" class="w-full px-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                    </div>
                    <button type="submit" id="register-submit-btn" class="w-full bg-pink-500 text-white px-8 py-3 rounded-full font-semibold hover:bg-pink-600 flex items-center justify-center disabled:opacity-50">
                        <span class="btn-text" data-lang-key="register_btn">បង្កើតគណនី</span>
                        <i class="fas fa-spinner spinner ml-2 hidden"></i>
                    </button>
                    <p class="text-center mt-4 text-sm">
                        <span data-lang-key="register_has_account">មានគណនីរួចហើយ?</span>
                        <a href="#" class="text-pink-500 hover:underline" data-page="login" data-lang-key="login_link">ចូលគណនី</a>
                    </p>
                </form>
            </div>
        </section>
    </main>
    
    <footer class="bg-white dark:bg-gray-800 mt-16 py-12 border-t dark:border-gray-700">
         <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-center md:text-left">
                <div>
                    <h3 class="text-xl font-bold text-pink-500 mb-4 inline-block" data-lang-key="nav_brand">ធៀប អនឡាញ</h3>
                    <p class="text-gray-600 dark:text-gray-400" data-lang-key="footer_desc">វេទិកាបង្កើតធៀបការឌីជីថលឈានមុខគេនៅកម្ពុជា។</p>
                </div>
                <div class="flex flex-col items-center md:items-start">
                    <h4 class="font-semibold text-lg mb-4" data-lang-key="footer_social">ទំនាក់ទំនង & តាមដានពួកយើង</h4>
                    <div class="flex space-x-6">
                        <a href="https://facebook.com" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-pink-500 text-3xl transform hover:scale-110 transition-transform"><i class="fab fa-facebook"></i></a>
                        <a href="https://t.me/your-telegram-username" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-blue-500 text-3xl transform hover:scale-110 transition-transform"><i class="fab fa-telegram"></i></a>
                        <a href="tel:+85581695138" class="text-gray-500 hover:text-green-500 text-3xl transform hover:scale-110 transition-transform"><i class="fas fa-phone"></i></a>
                        <a href="mailto:samnangkhiev168@gmail.com" class="text-gray-500 hover:text-red-500 text-3xl transform hover:scale-110 transition-transform"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
            </div>
             <div class="mt-10 pt-6 border-t dark:border-gray-700 text-center text-gray-600 dark:text-gray-400">
                  <p data-lang-key="footer_text">&copy; 2025 ធៀប អនឡាញ. រក្សាសិទ្ធិគ្រប់យ៉ាង។</p>
             </div>
         </div>
    </footer>

    <!-- Mobile Bottom Navigation -->
    <nav id="mobile-bottom-nav" class="md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-[0_-1px_3px_0_rgba(0,0,0,0.1)] z-40">
        <div class="flex justify-around h-16">
            <a href="#" data-page="home" class="mobile-nav-item flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 hover:text-pink-500 w-full transition-colors duration-200">
                <i class="fas fa-home text-xl"></i>
                <span class="text-xs mt-1" data-lang-key="nav_home">ទំព័រដើម</span>
            </a>
            <a href="#" data-page="features" class="mobile-nav-item flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 hover:text-pink-500 w-full transition-colors duration-200">
                <i class="fas fa-star text-xl"></i>
                <span class="text-xs mt-1" data-lang-key="nav_features">មុខងារ</span>
            </a>
            <a href="#" data-page="gallery" class="mobile-nav-item flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 hover:text-pink-500 w-full transition-colors duration-200">
                <i class="fas fa-images text-xl"></i>
                <span class="text-xs mt-1" data-lang-key="nav_templates">គំរូធៀប</span>
            </a>
            <a href="#" data-page="contact" class="mobile-nav-item flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 hover:text-pink-500 w-full transition-colors duration-200">
                <i class="fas fa-envelope text-xl"></i>
                <span class="text-xs mt-1" data-lang-key="nav_contact">ទាក់ទងយើង</span>
            </a>
        </div>
    </nav>


    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            onAuthStateChanged,
            signOut,
            updateProfile
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        const firebaseConfig = {
          apiKey: "AIzaSyBuE7NiFGrSg8FdKq-E_I0ygle3HetUhsw",
          authDomain: "theap-online-website.firebaseapp.com",
          projectId: "theap-online-website",
          storageBucket: "theap-online-website.appspot.com",
          messagingSenderId: "460601895037",
          appId: "1:460601895037:web:e40ea194c9d801934e2914"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // --- DATA FOR TRANSLATION ---
        const translations = {
            km: {
                page_title: 'គេហទំព័រអាពាហ៍ពិពាហ៍ - ធៀប អនឡាញ', nav_brand: 'ធៀប អនឡាញ', nav_home: 'ទំព័រដើម', nav_features: 'មុខងារ', nav_templates: 'គំរូធៀប', nav_contact: 'ទាក់ទងយើង', create_card_btn: 'បង្កើតគណនី', hero_tagline: 'ធៀប អនឡាញ - អ្នកបង្កើតធៀបការ', hero_title: 'រៀបចំគម្រោងអាពាហ៍ពិពាហ៍ក្នុងក្តីស្រមៃអ្នក', hero_subtitle: 'បង្កើតនិងរៀបចំធៀបការឌីជីថល គ្រប់គ្រងបញ្ជីភ្ញៀវ និងចែករំលែករឿងរ៉ាវស្នេហារបស់អ្នកបានយ៉ាងងាយស្រួល។', hero_cta: 'ចាប់ផ្តើមឥឡូវនេះ', stat_1_val: '២០០០+', stat_1_label: 'គូស្វាមីភរិយា', stat_2_val: '២៤/៧', stat_2_label: 'ការគាំទ្រ', stat_3_val: '៩៩%', stat_3_label: 'ការពេញចិត្ត', features_title: 'មុខងារពិសេសរបស់យើង', feature_1_title: 'ជម្រើសគំរូច្រើន', feature_1_desc: 'បង្កើតធៀបការដ៏ស្រស់ស្អាត និងអាចប្ដូរតាមបំណងបាន។', feature_2_title: 'ការគ្រប់គ្រងភ្ញៀវ', feature_2_desc: 'តាមដានការឆ្លើយតបរបស់ភ្ញៀវ និងគ្រប់គ្រងបញ្ជីឈ្មោះបានយ៉ាងងាយស្រួល។', feature_3_title: 'វិចិត្រសាលរូបភាព', feature_3_desc: 'ចែករំលែករូបថត Pre-wedding និងអនុស្សាវរីយ៍ផ្សេងៗជាមួយភ្ញៀវរបស់អ្នក។', feature_4_title: 'គ្មានការផ្សាយពាណិជ្ជកម្ម', feature_4_desc: 'ធានានូវបទពិសោធន៍ដ៏ល្អឥតខ្ចោះសម្រាប់ភ្ញៀវរបស់អ្នក។', feature_5_title: 'ការរាប់ថយក្រោយ', feature_5_desc: 'បង្ហាញម៉ោងរាប់ថយក្រោយរហូតដល់ថ្ងៃពិសេសរបស់អ្នក។', feature_6_title: 'ផែនទី', feature_6_desc: 'ភ្ជាប់ទីតាំងពិធីរបស់អ្នកជាមួយ Google Maps សម្រាប់ភ្ញៀវ។', templates_title: 'គំរូធៀបអញ្ជើញ', contact_title: 'ទាក់ទងមកពួកយើង', form_name: 'ឈ្មោះ', form_email: 'អ៊ីមែល', form_message: 'សារ', form_send: 'ផ្ញើសារ', login_title: 'ចូលគណនី', login_btn: 'ចូលគណនី', form_password: 'ពាក្យសម្ងាត់', login_no_account: 'មិនទាន់មានគណនី?', register_link: 'បង្កើតគណនី', register_title: 'បង្កើតគណនីថ្មី', form_confirm_password: 'បញ្ជាក់ពាក្យសម្ងាត់', register_btn: 'បង្កើតគណនី', register_has_account: 'មានគណនីរួចហើយ?', login_link: 'ចូលគណនី', footer_desc: 'វេទិកាបង្កើតធៀបការឌីជីថលឈានមុខគេនៅកម្ពុជា។', footer_links: 'តំណភ្ជាប់រហ័ស', footer_social: 'ទំនាក់ទំនង & តាមដានពួកយើង', footer_text: '&copy; 2025 ធៀប អនឡាញ. រក្សាសិទ្ធិគ្រប់យ៉ាង។', my_cards_link: 'ធៀបរបស់ខ្ញុំ', edit_card_link: 'កែសម្រួលធៀប', logout_btn: 'ចាកចេញ',
                error_pass_length: 'ពាក្យសម្ងាត់ត្រូវមានយ៉ាងតិច ៦ តួអក្សរ។', error_pass_mismatch: 'ពាក្យសម្ងាត់មិនត្រូវគ្នាទេ។', success_register: 'ការបង្កើតគណនីបានជោគជ័យ!', error_email_in_use: 'អ៊ីមែលនេះត្រូវបានប្រើប្រាស់រួចហើយ។', error_generic: 'មានបញ្ហា។ សូមព្យាយាមម្តងទៀត។', error_login_failed: 'អ៊ីមែល ឬពាក្យសម្ងាត់មិនត្រឹមត្រូវទេ។',
                theme_toggle_text: 'ប្តូរការបង្ហាញ', lang_toggle_text_km: 'ប្តូរទៅ EN', lang_toggle_text_en: 'Switch to KM', create_card_now_btn: 'បង្កើតធៀបឥឡូវនេះ',
            },
            en: {
                page_title: 'Wedding Website - Theap Online', nav_brand: 'Theap Online', nav_home: 'Home', nav_features: 'Features', nav_templates: 'Card Templates', nav_contact: 'Contact Us', create_card_btn: 'Create Account', hero_tagline: 'Theap Online - Invitation Card Maker', hero_title: 'Plan Your Dream Wedding', hero_subtitle: 'Easily create digital invitations, manage your guest list, and share your love story.', hero_cta: 'Get Started Now', stat_1_val: '2000+', stat_1_label: 'Couples', stat_2_val: '24/7', stat_2_label: 'Support', stat_3_val: '99%', stat_3_label: 'Satisfaction', features_title: 'Our Amazing Features', feature_1_title: 'Multiple Templates', feature_1_desc: 'Create beautiful and customizable digital wedding invitations.', feature_2_title: 'Guest Management', feature_2_desc: 'Track RSVPs and manage your guest list effortlessly.', feature_3_title: 'Photo Gallery', feature_3_desc: 'Share your pre-wedding photos and memories with your guests.', feature_4_title: 'Ad-Free', feature_4_desc: 'Ensure a clean and premium experience for all your guests.', feature_5_title: 'Countdown Timer', feature_5_desc: 'Display a countdown timer to your special day.', feature_6_title: 'Event Maps', feature_6_desc: 'Integrate Google Maps for your ceremony and reception venues.', templates_title: 'Invitation Templates', contact_title: 'Contact Us', form_name: 'Name', form_email: 'Email', form_message: 'Message', form_send: 'Send Message', login_title: 'Login', login_btn: 'Login', form_password: 'Password', login_no_account: "Don't have an account?", register_link: 'Register', register_title: 'Create a New Account', form_confirm_password: 'Confirm Password', register_btn: 'Register', register_has_account: 'Already have an account?', login_link: 'Login', footer_desc: 'The leading digital wedding invitation platform in Cambodia.', footer_links: 'Quick Links', footer_social: 'Contact & Follow Us', footer_text: '&copy; 2025 Theap Online. All rights reserved.', my_cards_link: 'My Cards', edit_card_link: 'Edit Card', logout_btn: 'Logout',
                error_pass_length: 'Password must be at least 6 characters long.', error_pass_mismatch: 'Passwords do not match.', success_register: 'Account created successfully!', error_email_in_use: 'This email is already in use.', error_generic: 'An error occurred. Please try again.', error_login_failed: 'Invalid email or password.',
                theme_toggle_text: 'Toggle Theme', lang_toggle_text_km: 'Change to EN', lang_toggle_text_en: 'Switch to KM', create_card_now_btn: 'Create Card Now',
            }
        };

        // --- UI ELEMENTS ---
        const pages = document.querySelectorAll('.page');
        const mobileBottomNavLinks = document.querySelectorAll('#mobile-bottom-nav a');
        const profileButton = document.getElementById('profile-button');
        const profileDropdown = document.getElementById('profile-dropdown');
        const themeToggleButton = document.getElementById('theme-toggle');
        const langToggleButton = document.getElementById('lang-toggle');
        const heroCtaBtn = document.getElementById('hero-cta-btn');
        const createCardNowBtn = document.getElementById('create-card-now-btn');
        let typeInterval, typingAnimationHasRun = false;

        // --- Page Navigation ---
        function showPage(pageId) {
            if (!pageId) return;
            pages.forEach(p => p.classList.toggle('active', p.id === pageId));
            window.scrollTo(0, 0);

            // Update active state for mobile bottom nav
            mobileBottomNavLinks.forEach(link => {
                 link.classList.toggle('active', link.dataset.page === pageId);
            });
        }
        window.showPage = showPage;
        
        // Add event listeners to all navigation links
        document.querySelectorAll('a[data-page], button[data-page]').forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                showPage(link.getAttribute('data-page'));
            });
        });

        // --- THEME & LANGUAGE ---
        let currentLang = localStorage.getItem('lang') || 'km';

        function applyTheme(theme) {
            const isDark = theme === 'dark';
            document.documentElement.classList.toggle('dark', isDark);
            document.getElementById('sun-icon').classList.toggle('hidden', isDark);
            document.getElementById('moon-icon').classList.toggle('hidden', !isDark);
        }

        function changeLanguage(lang) {
            const heroTitleEl = document.querySelector('[data-lang-key="hero_title"]');
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (translations[lang]?.[key] && el !== heroTitleEl) {
                    // Handle specific cases for span inside buttons
                    if(el.id === 'lang-toggle') {
                        el.querySelector('span').innerText = translations[lang][lang === 'km' ? 'lang_toggle_text_km' : 'lang_toggle_text_en'];
                    } else {
                        // Check if the element is the nav link text span
                        if (el.tagName === 'SPAN' && el.parentElement.tagName === 'A' && el.parentElement.closest('nav')) {
                             el.innerHTML = translations[lang][key];
                        } else if (el.tagName === 'A' && el.closest('nav')) {
                             // Don't change the whole A tag, only its span if it exists
                             const span = el.querySelector('span');
                             if(span) span.innerHTML = translations[lang][key];
                        } else {
                             el.innerHTML = translations[lang][key];
                        }
                    }
                }
            });
            document.title = translations[lang].page_title;
            document.documentElement.lang = lang;
            
            // Update lang button text separately
            document.getElementById('lang-text').innerText = lang === 'km' ? translations.km.lang_toggle_text_km : translations.en.lang_toggle_text_en;

            if (heroTitleEl && !typingAnimationHasRun) startTypingAnimation(heroTitleEl, translations[lang].hero_title);
        }

        function startTypingAnimation(element, text) {
            clearInterval(typeInterval);
            let i = 0;
            element.innerHTML = '';
            element.classList.add('typing');
            typeInterval = setInterval(() => {
                if (i < text.length) element.innerHTML += text.charAt(i++);
                else {
                    clearInterval(typeInterval);
                    typingAnimationHasRun = true;
                    element.classList.remove('typing');
                }
            }, 120);
        }
        
        themeToggleButton.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            applyTheme(isDark ? 'dark' : 'light');
        });

        langToggleButton.addEventListener('click', () => {
            currentLang = currentLang === 'km' ? 'en' : 'km';
            localStorage.setItem('lang', currentLang);
            changeLanguage(currentLang);
        });

        // --- Profile Dropdown Logic ---
        profileButton.addEventListener('click', (e) => {
            e.stopPropagation();
            profileDropdown.classList.toggle('hidden');
        });
        document.addEventListener('click', () => profileDropdown.classList.add('hidden'));


        // --- AUTHENTICATION LOGIC ---
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');

        const toggleSpinner = (form, show) => {
            const button = form.querySelector('button[type="submit"]');
            button.disabled = show;
            button.querySelector('.spinner').classList.toggle('hidden', !show);
            button.querySelector('.btn-text').classList.toggle('hidden', show);
        };
        
        const showAuthError = (form, messageKey) => {
            const errorDiv = form.querySelector('[id$="-error"]');
            errorDiv.textContent = translations[currentLang][messageKey] || messageKey;
            errorDiv.classList.remove('hidden');
        };

        if (registerForm) {
            registerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                toggleSpinner(registerForm, true);
                document.getElementById('register-error').classList.add('hidden');
                
                const name = document.getElementById('register-name').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('register-confirm-password').value;

                if (password.length < 6) {
                    showAuthError(registerForm, 'error_pass_length');
                    toggleSpinner(registerForm, false);
                    return;
                }
                if (password !== confirmPassword) {
                    showAuthError(registerForm, 'error_pass_mismatch');
                    toggleSpinner(registerForm, false);
                    return;
                }

                createUserWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        return updateProfile(userCredential.user, { displayName: name });
                    })
                    .then(() => {
                        alert(translations[currentLang].success_register);
                        showPage('login');
                    })
                    .catch((error) => {
                        const errorCode = error.code === 'auth/email-already-in-use' ? 'error_email_in_use' : 'error_generic';
                        showAuthError(registerForm, errorCode);
                    })
                    .finally(() => {
                        toggleSpinner(registerForm, false);
                    });
            });
        }

        if (loginForm) {
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                toggleSpinner(loginForm, true);
                document.getElementById('login-error').classList.add('hidden');

                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;

                signInWithEmailAndPassword(auth, email, password)
                    .then(() => { window.location.href = 'my-cards.html'; }) // Redirect to user dashboard
                    .catch(() => { showAuthError(loginForm, 'error_login_failed'); })
                    .finally(() => { toggleSpinner(loginForm, false); });
            });
        }

        onAuthStateChanged(auth, (user) => {
            const loggedIn = !!user;
            document.getElementById('auth-buttons').classList.toggle('hidden', loggedIn);
            document.getElementById('user-profile-container').classList.toggle('hidden', !loggedIn);
            
            // Toggle hero buttons
            heroCtaBtn.classList.toggle('hidden', loggedIn);
            createCardNowBtn.classList.toggle('hidden', !loggedIn);
            
            if (loggedIn) {
                const displayName = user.displayName || (user.email ? user.email.split('@')[0] : 'User');
                document.getElementById('profile-name').textContent = displayName;
                document.getElementById('profile-email').textContent = user.email || '';
                document.getElementById('profile-avatar').src = `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=f472b6&color=fff&rounded=true`;
            }
        });
        
        document.getElementById('logout-btn').addEventListener('click', () => {
             signOut(auth).catch(error => console.error('Logout Error:', error));
        });

        // --- INITIALIZATION ---
        const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        applyTheme(currentTheme);
        changeLanguage(currentLang);
        showPage('home');
    </script>
</body>
</html>
